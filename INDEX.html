<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ganesh Greeting</title>
<!-- Tailwind CDN (works on GitHub Pages) -->
<script src="https://cdn.tailwindcss.com"></script>
<!-- html2canvas for client-side image export -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" integrity="sha512-BNa5m0n1m1N1Q2V5p6s0Kk6Qy6e0p3b8b3s1Q2rF5x6lW0v1y0Z4K8m0X2Y2p9z0q3H1p4J7s8t9m0n1o2p3q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<link href="https://fonts.googleapis.com/css2?family=Tiro+Devanagari+Hindi:wght@400;700&family=Playfair+Display:wght@600;800&family=Great+Vibes&display=swap" rel="stylesheet">
<style>
  .doctor-font { font-family: 'Playfair Display', serif; }
  .ganesha-mantra, .ganesha-sloka { font-family: 'Tiro Devanagari Hindi', serif; text-align: center; margin: 0; padding: 0; }
  .ganesha-mantra { font-size: 2rem; font-weight: 900; color: #8B0000; }
  .ganesha-sloka { font-size: 1.5rem; font-weight: 700; margin-top: 0.25rem; color: #800000; }
  body { background: linear-gradient(135deg, #FFEFBA, #FFFFFF, #FFDEE9, #B5FFFC); background-size: 400% 400%; animation: gradientMove 12s ease infinite; }
  @keyframes gradientMove { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
  #ganeshaBgPreview { opacity: 0.2; }
</style>
</head>
<body class="flex flex-col items-center p-4 min-h-screen">

<div class="w-full max-w-md mb-6 p-4 shadow-xl bg-white rounded-xl">
  <div class="grid gap-4 text-sm">
    <input type="text" id="doctorName" placeholder="Doctor Name" class="p-2 border rounded w-full" />
    <input type="text" id="speciality" placeholder="Speciality" class="p-2 border rounded w-full" />
    <div><label class="block text-xs mb-1">Doctor Photo</label><input type="file" id="doctorPhoto" accept="image/*" /></div>
    <div><label class="block text-xs mb-1">Background Ganesha Image</label><input type="file" id="ganeshaBackground" accept="image/*" /></div>
    <div><label class="block text-xs mb-1">Background Gradient</label>
      <select id="bgGradient" class="p-2 border rounded w-full">
        <option value="from-yellow-100 via-orange-200 to-red-100" selected>Golden Orange</option>
        <option value="from-pink-100 via-red-200 to-yellow-100">Rose Sunset</option>
        <option value="from-green-100 via-emerald-200 to-teal-100">Divine Green</option>
        <option value="from-blue-100 via-indigo-200 to-purple-100">Spiritual Blue</option>
        <option value="from-purple-200 via-pink-300 to-yellow-200">Festive Multicolor</option>
      </select>
    </div>
    <div><label class="block text-xs mb-1">Language</label>
      <select id="languageSelect" class="p-2 border rounded w-full">
        <option value="en" selected>English</option>
        <option value="hi">Hindi</option>
        <option value="bn">Bengali</option>
        <option value="ta">Tamil</option>
        <option value="te">Telugu</option>
        <option value="ml">Malayalam</option>
        <option value="kn">Kannada</option>
        <option value="gu">Gujarati</option>
        <option value="mr">Marathi</option>
        <option value="pa">Punjabi</option>
      </select>
    </div>
    <div><label class="block text-xs mb-1">Brand Reminder</label><input type="file" id="brandImage" accept="image/*" /></div>
  </div>
</div>

<div id="greeting-card" class="relative w-[360px] h-[600px] sm:w-[400px] sm:h-[640px] rounded-xl shadow-2xl border-4 border-yellow-700 flex flex-col items-center overflow-hidden bg-gradient-to-b from-yellow-100 via-orange-200 to-red-100">
  <img id="ganeshaBgPreview" class="absolute inset-0 w-full h-full object-cover" alt="Ganesha background preview"/>
  <div class="relative z-20 flex flex-col items-center justify-center mt-2 px-3 text-center">
    <h2 class="text-xl sm:text-2xl font-extrabold text-orange-900 font-serif leading-snug">Wishing You a Joyful & Blessed <span class="text-red-700">Ganesh Chaturthi</span></h2>
    <div class="ganesha-mantra mt-2">ॐ गं गणपतये नमः</div>
    <div class="ganesha-sloka" id="slokaText">वक्रतुंड महाकाय सूर्यकोटि समप्रभ। निर्विघ्नं कुरु मे देव सर्वकार्येषु सर्वदा॥</div>
  </div>
  <div class="relative z-20 text-center mt-2 px-2">
    <img id="doctorPreview" class="mx-auto h-32 w-32 sm:h-36 sm:w-36 rounded-full border-4 border-white shadow-lg object-cover mt-8" alt="Doctor photo preview"/>
    <h2 id="doctorNamePreview" class="doctor-font mt-1 text-lg sm:text-xl font-bold text-gray-900"></h2>
    <p id="specialityPreview" class="doctor-font text-base sm:text-lg font-semibold text-gray-800"></p>
    <div id="messagePreview" class="mt-2 px-4 text-xs sm:text-sm font-medium italic leading-relaxed"></div>
  </div>
  <div id="brandPreview" class="absolute bottom-0 left-0 w-full bg-white/90 py-2 px-4 flex justify-center items-center shadow-inner z-20">
    <img id="brandImagePreview" class="max-h-20 sm:max-h-24 object-contain" alt="Brand image preview"/>
  </div>
</div>

<div class="flex gap-3 mt-4">
  <button id="downloadBtn" class="flex items-center gap-2 text-sm sm:text-base bg-green-500 text-white px-3 py-2 rounded-lg shadow" title="Download greeting as PNG">Download Greeting as Image</button>
</div>

<script>
const doctorInput = document.getElementById('doctorPhoto');
const doctorPreview = document.getElementById('doctorPreview');
const ganeshaInput = document.getElementById('ganeshaBackground');
const ganeshaPreview = document.getElementById('ganeshaBgPreview');
const brandInput = document.getElementById('brandImage');
const brandPreview = document.getElementById('brandImagePreview');
const doctorNameInput = document.getElementById('doctorName');
const specialityInput = document.getElementById('speciality');
const doctorNamePreview = document.getElementById('doctorNamePreview');
const specialityPreview = document.getElementById('specialityPreview');
const messagePreview = document.getElementById('messagePreview');
const languageSelect = document.getElementById('languageSelect');
const greetingCard = document.getElementById('greeting-card');
const bgGradient = document.getElementById('bgGradient');

const messages = {
  en: 'On this auspicious Ganesh Chaturthi, may Lord Ganesha bless you with wisdom, prosperity, good health, and endless happiness.',
  hi: 'इस पवित्र गणेश चतुर्थी पर, भगवान गणेश आपको बुद्धि, समृद्धि, अच्छे स्वास्थ्य और अनंत खुशियाँ दें।',
  bn: 'এই পবিত্র গণেশ চতুর্থীতে, গণেশ দেবতা আপনাকে জ্ঞান, সমৃদ্ধি, সুস্বাস্থ্য এবং অসীম সুখ দান করুন।',
  ta: 'இந்த பவித்ர கணேச சதுர்த்தியில், கணேசர் உங்களுக்கு அறிவு, செழிப்பு, நல்ல உடல்நலம் மற்றும் முடிவற்ற மகிழ்ச்சி அருளட்டும்.',
  te: 'ఈ పవిత్ర గణేష్ చతుర్థి సందర్భంగా, గణేశుడు మీకు జ్ఞానం, సంపద, ఆరోగ్యాన్ని మరియు అంతరంగం సంతోషాన్ని ప్రసాదించును.',
  ml: 'ഈ പവിത്ര ഗണേശ ചതുര്‍ഥിയില്‍, ഗണേശന്‍ നിങ്ങളെ ജ്ഞാനം, സമൃദ്ധി, നല്ല ആരോഗ്യവും, അനന്ത സന്തോഷവും നല്‍കട്ടെ.',
  kn: 'ಈ ಪವಿತ್ರ ಗಣೇಶ ಚತುರ್ಥಿಯ ಸಂದರ್ಭದಲ್ಲಿ, ಗಣೇಶನು ನಿಮಗೆ ಜ್ಞಾನ, ಸಮೃದ್ಧಿ, ಉತ್ತಮ ಆರೋಗ್ಯ ಮತ್ತು ಅಸಂಖ್ಯಾತ ಸಂತೋಷ ನೀಡಲಿ.',
  gu: 'આ પવિત્ર ગણેશ ચતુર્થીએ, ભગવાન ગણેશ તમને બુદ્ધિ, સમૃદ્ધિ, સારા આરોગ્ય અને અનંત ખુશીઓ આપે.',
  mr: 'या पवित्र गणेश चतुर्थीला, भगवान गणेश आपल्याला बुद्धी, समृद्धी, चांगले आरोग्य आणि अखंड आनंद देवो.',
  pa: 'ਇਸ ਪवਿੱਤਰ ਗਣੇਸ਼ ਚਤੁਰਥੀ \'ਚ, ਗਣੇਸ਼ ਪ੍ਰਭੂ ਤੁਹਾਨੂੰ ਗਿਆਨ, ਸਮೃದ್ಧੀ, ਵਧੀਆ ਸਿਹਤ ਅਤੇ ਅੰਤਹਿਨ ਖੁਸ਼ੀ ਦੇਣ।'
};

function updateMessage() {
  const lang = languageSelect.value;
  messagePreview.textContent = messages[lang] || messages['en'];
}

doctorNameInput.addEventListener('input', () => { doctorNamePreview.textContent = doctorNameInput.value; });
specialityInput.addEventListener('input', () => { specialityPreview.textContent = specialityInput.value; });
languageSelect.addEventListener('change', updateMessage);
updateMessage();

function loadImagePreview(input, previewImg){
  input.addEventListener('change', e => {
    const file = e.target.files && e.target.files[0];
    if(!file) return;
    const reader = new FileReader();
    reader.onload = function(ev){
      previewImg.src = ev.target.result;
      previewImg.style.display = 'block';
    };
    reader.readAsDataURL(file);
  });
}

loadImagePreview(doctorInput, doctorPreview);
loadImagePreview(ganeshaInput, ganeshaPreview);
loadImagePreview(brandInput, brandPreview);

bgGradient.addEventListener('change', () => {
  greetingCard.className = `relative w-[360px] h-[600px] sm:w-[400px] sm:h-[640px] rounded-xl shadow-2xl border-4 border-yellow-700 flex flex-col items-center overflow-hidden bg-gradient-to-b ${bgGradient.value}`;
});

// Download as PNG using html2canvas
document.getElementById('downloadBtn').addEventListener('click', () => {
  // temporarily remove focus outlines for a cleaner capture
  const prevOutline = document.activeElement;
  if(prevOutline) prevOutline.blur();

  html2canvas(greetingCard, {useCORS: true, allowTaint: true}).then(canvas => {
    const link = document.createElement('a');
    link.download = 'Ganesh-Greeting.png';
    link.href = canvas.toDataURL('image/png');
    // For maximum compatibility with GitHub Pages and browsers, append to body then click
    document.body.appendChild(link);
    link.click();
    link.remove();
  }).catch(err => {
    console.error('Export failed', err);
    alert('Sorry — could not export image. Try a different browser or enable "Allow file access" for local images.');
  });
});
</script>

</body>
</html>
